<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Proveedor - REPSE</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
    background: linear-gradient(135deg, #ff6a00, #ff007b, #6600ff);
    background-size: 300% 300%;
    animation: gradientShift 10s ease infinite;
    color: #fff;
}
@keyframes gradientShift {
    0% { background-position:0% 50%; }
    50% { background-position:100% 50%; }
    100% { background-position:0% 50%; }
}
.card { background: rgba(255,255,255,0.92); color:#333; border-radius:10px; padding:20px; margin-bottom:20px;}
.table th { background-color:#ff6a00; color:white; }
</style>
</head>

<body>
<div class="container mt-4">
<h3 class="text-white mb-4">Dashboard Proveedor</h3>

{% for p in projects %}
<div class="card">
<h5>{{ p['name'] }} - {{ p['created_at'] }}</h5>

<table class="table table-bordered">
<thead><tr><th>Documento</th><th>Archivo</th><th>Acción</th></tr></thead>
<tbody>
{% for doc in DOCUMENTOS_OBLIGATORIOS %}
<tr>
<td>{{ doc }}</td>

<td>
{% if documentos_subidos[p['id']].get(doc) %}
    {{ documentos_subidos[p['id']][doc]['nombre_archivo'] }}
{% else %}
    -
{% endif %}
</td>

<td>
<form method="POST" enctype="multipart/form-data" class="d-inline">
    <input type="hidden" name="action" value="upload_doc">
    <input type="hidden" name="project_id" value="{{ p['id'] }}">
    <input type="hidden" name="tipo_documento" value="{{ doc }}">
    <input type="file" name="documento" class="form-control form-control-sm" required>
    <button class="btn btn-success btn-sm mt-1">Guardar</button>
</form>
</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>
{% endfor %}

<a href="{{ url_for('logout') }}" class="btn btn-light mt-2">Cerrar sesión</a>
</div>
</body>
</html>
